using System;
using System.Collections.Generic;
using System.Timers;
using System.Windows.Forms;
using Microsoft.Xna.Framework;
using Timer = System.Timers.Timer;

namespace CursorAiming
{
    public class Waves : SpaceHeadBaseComponent
    {
<<<<<<< HEAD:Space Head/CursorAiming/Waves.cs.orig
=======
        public static List<Enemy> EnemyUnitsOnField = new List<Enemy>();
        public static int _enemyCount;
        private static Random _rng = new Random();
        private double _tempTimeLeft;
        private int _numberOfEnemiesToSpawn;
        public static int _waveRound = 1;
        private int _enemiesCantSpawnSquared;


>>>>>>> origin/Feature-LevelUp:Space Head/CursorAiming/Waves.cs
        public enum EnemyLevels
        {
            Easy,
            Medium,
            Hard
        }

<<<<<<< HEAD:Space Head/CursorAiming/Waves.cs.orig
        public static List<Enemy> EnemyUnitsOnField = new List<Enemy>();
        public static int _enemyCount;
        private static readonly Random _rng = new Random();
        public static int _waveRound = 1;
        private int _numberOfEnemiesToSpawn;

=======
        
>>>>>>> origin/Feature-LevelUp:Space Head/CursorAiming/Waves.cs
        public Waves(Game game) : base(game)
        {
            Game.Components.Add(this);
            EnemyUnitsOnField.Clear();
        }


        public void SpawnEnemy()
        {
            var newEnemyPosition = Vector2.Zero;
            newEnemyPosition.X = _rng.Next(0, Globals.ScreenWidth);
            newEnemyPosition.Y = _rng.Next(0, Globals.ScreenHeight);

<<<<<<< HEAD:Space Head/CursorAiming/Waves.cs.orig.orig
            var spawnedEnemy = new EnemyWithGun(new Gun("PlayerGun1", "laserBlue01", 1, 700, UnitType.Player, Game),
<<<<<<< HEAD:Space Head/CursorAiming/Waves.cs.orig
<<<<<<< HEAD
=======
            new EnemyWithGun(new Gun("PlayerGun1", "laserBlue01", 1, 700, UnitType.Player, Game),
>>>>>>> 6d0e7780aab129579c37da0012affc28910df4ba:Space Head/CursorAiming/Waves.cs
                200, 10, 1d, "BasicEnemy", 100, 100, 100, Game) {Position = newEnemyPosition};
=======
                100, 100, 1d, "BasicEnemy", 100, 100, 100, Game) {Position = newEnemyPosition};
>>>>>>> 88f1202329b795d6440d4f7cc1708ac934c15c55

           //EnemyUnitsOnField.Add(spawnedEnemy);
        }

        public void SetTimer(GameState gameState)
        {
            SpaceHeadGame.ChangeCurrentGameState(gameState);
            var aTimer = new Timer(3000);
=======
                200, 2, 1d, "BasicEnemy", 100, 100, 100, Game) {Position = newEnemyPosition};
        }

        public void SetTimer(int intervalInMilli)
        {
            var aTimer = new System.Timers.Timer(intervalInMilli);
            if (SpaceHeadGame.Instance.GameState != GameState.Playing)
                aTimer.Stop();
>>>>>>> origin/Feature-LevelUp:Space Head/CursorAiming/Waves.cs
            aTimer.Elapsed += OnTimedEvent;
            aTimer.Enabled = true;
        }

        public void OnTimedEvent(object sender, ElapsedEventArgs e)
        {
            _numberOfEnemiesToSpawn = _waveRound * 2 + 1;

            while (_enemyCount < _numberOfEnemiesToSpawn && GameState.Playing == SpaceHeadGame.GameState)
            {
                SpawnEnemy();
                _enemyCount++;
            }
        }

        public override void Update(GameTime gameTime)
        {
            base.Update(gameTime);
        }

        public static void Reset(Game game)
        {
            foreach (var enemy in EnemyUnitsOnField)
                enemy.Remove();

            EnemyUnitsOnField.Clear();
            _enemyCount = 0;
            _waveRound = 1;
        }
    }
}